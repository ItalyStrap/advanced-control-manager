function runSortable(a,b){a.sortable({cursor:"move",stop:function(){_update_input_ids(a,b)}})}function _get_the_images_id(a){var b="";return a.children().each(function(a,c){b+=0===a?jQuery(c).find("img").data("id"):","+jQuery(c).find("img").data("id")}),b}function _update_input_ids(a,b){b.val(_get_the_images_id(a))}jQuery(document).ready(function(a){"use strict";a("#widgets-right").on("click",".upw-tab-item",function(b){b.preventDefault();var c=a(this).parents(".widget");c.find(".upw-tab-item").removeClass("active"),a(this).addClass("active"),c.find(".upw-tab").addClass("upw-hide"),c.find("."+a(this).data("toggle")).removeClass("upw-hide")}),a(document).on("click",".upload_image_button",function(){return jQuery.data(document.body,"prevElement",a(this).prev()),window.send_to_editor=function(a){var b=jQuery("img",a).attr("src"),c=jQuery.data(document.body,"prevElement");void 0!==c&&""!==c&&c.val(b),tb_remove()},tb_show("","media-upload.php?type=image&TB_iframe=true"),!1});var b,c;a(document).on("hover",".widget-content",function(b){b.preventDefault();var c=a(this).find(".media_carousel_sortable ul"),d=a(this).find(".ids");runSortable(c,d)}),a(document).on("click",".dashicons-no",function(b){b.preventDefault(),c=a(this).parent().parent();var d=c.closest(".media_carousel_sortable ul"),e=c.closest(".widget-content").find(".ids");c.remove(),_update_input_ids(d,e)}),a(document).on("click",".upload_carousel_image_button",function(c){c.preventDefault();var d=a(this).offsetParent();b=wp.media.frames.file_frame=wp.media({library:{type:"image"},title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!0}),b.on("select",function(){var a=b.state().get("selection").first().toJSON(),c=a.sizes.thumbnail?a.sizes.thumbnail.url:a.url,e=null,f=null;e=d.find(".carousel_images"),e.append('<li class="carousel-image ui-state-default"><div><i class="dashicons dashicons-no"></i><img src="'+c+'" width="150px" height="150px" data-id="'+a.id+'" /></div></li>'),f=d.find(".ids"),""===f.val()?f.val(a.id):f.val(f.val()+","+a.id),e=null,f=null}),b.open()}),a(document).on("click",".upload_single_image_button",function(c){c.preventDefault();var d=a(this).offsetParent();b=wp.media.frames.file_frame=wp.media({library:{type:"image"},title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),b.on("select",function(){var a=b.state().get("selection").first().toJSON(),c=a.sizes.thumbnail?a.sizes.thumbnail.url:a.url,e=null,f=null;e=d.find(".carousel_images"),e.empty(),e.append('<li class="carousel-image ui-state-default"><div><i class="dashicons dashicons-no"></i><img src="'+c+'" width="150px" height="150px" data-id="'+a.id+'" /></div></li>'),f=d.find(".ids"),f.val(a.id),console.log(f.val()),e=null,f=null}),b.open()}),a(document).on("click",".upload_carousel_single_image_button",function(c){c.preventDefault();var d=a(this).offsetParent();b=wp.media.frames.file_frame=wp.media({frame:"post",state:"gallery",library:{type:"image"},title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!0}),b.on("select",function(){var a=b.state().get("selection").first().toJSON();console.log(a),console.log(a.uploadedTo);var c=a.sizes.thumbnail.url?a.sizes.thumbnail.url:a.url,e=null,f=null;e=d.find(".carousel_images"),e.append('<li class="carousel-image ui-state-default"><div><i class="dashicons dashicons-no"></i><img src="'+c+'" width="150px" height="150px" data-id="'+a.id+'" /></div></li>'),f=d.find(".ids"),""===f.val()?f.val(a.id):f.val(f.val()+","+a.id),e=null,f=null}),b.open()})});